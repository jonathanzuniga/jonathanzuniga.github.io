<div class="layout-aside
	{% if page.layout == 'page' or
				page.layout == 'articles' or
        page.layout == 'stories' %}
    layout-aside-single
	{% elsif page.layout == 'post' %}
		layout-aside-entry
	{% endif %}">
	{% if page.url == '/' %}
		<section class="aside-entries">
			<h2 class="aside-entries-title">
				<a href="{{ site.baseurl }}/historias">
					Historias
				</a>
			</h2>

			{% assign postCounter = 0 %}
			{% assign maxPost = 3 %}
			{% for post in site.posts %}
				{% if post.categories contains 'historias' %}
					<article class="teaser teaser-aside-entries">
						<a class="teaser-link" href="{{ post.url }}">
							<h3 class="teaser-title">
								{{ post.title }}
							</h3>
						</a>

						<div class="teaser-content">
							<p class="teaser-meta">
								Publicado en 
								{% assign sorted_categories = post.categories | sort %}
								{% for category in sorted_categories %}
									<!-- <a class="teaser-category" href="{{ site.baseurl }}/">{{ category | replace: '-', ' ' }}</a> -->
									{% if category == 'articulos' %}
										<a class="teaser-category" href="{{ site.baseurl }}/articulos">artículos</a>
									{% elsif category == 'historias' %}
										<a class="teaser-category" href="{{ site.baseurl }}/historias">historias</a>
									{% endif %}
								{% endfor %}
								{% include date.html %}
								<!-- por 
								{% assign author = site.authors[post.author] %}
								<a class="teaser-author" href="{{ site.baseurl }}/autor">
									{{ author.name }}
								</a> -->
							</p>

							<div class="teaser-intro">
								{{ post.excerpt }}
							</div>
						</div>
					</article>
					{% assign postCounter = postCounter | plus: 1 %}
					{% if postCounter >= maxPost %}
						{% break %}
					{% endif %}
				{% endif %}
			{% endfor %}
		</section>
	{% elsif page.layout == 'post' %}		
		<p class="authors authors-fixed">
			<a class="authors-link" href="{{ site.baseurl }}/autor">
				{% assign author = site.authors[page.author] %}
				<img class="authors-image authors-image-rounded" src="{{ site.baseurl }}/images/authors/{{ author.avatar }}" alt="{{ author.name }}">
				<span class="authors-name">
					{{ author.name }}
				</span>
			</a>
		</p>
		
		{% comment %}
		{% if page.categories contains 'articulos' %}
			<h3 class="aside-title">
				Artículos
			</h3>

			<p>
				En lugar de mantener un blog tradicional, esta página sirve como hogar para la escritura y como depósito de respuestas a las preguntas más frecuentes acerca de mis gustos y mi trabajo. Para recibir actualizaciones, puedes <a href="https://twitter.com/{{ site.twitter_username }}" target="_target">seguirme en twitter</a> o <a href="{{ "/feed.xml" | prepend: site.baseurl }}" target="_blank">suscríbirte a mi feed RSS</a>. Por favor, siéntate libre de enviarme por correo electrónico tus comentarios o correcciones.
			</p>
		{% elsif page.categories contains 'historias' %}
			<h3 class="aside-title">
				Historias
			</h3>

			<p>
				Por otra parte, en esta página encontrarás una colección de experiencias del pasado relatadas desde este inmejorable presente. Para recibir actualizaciones, puedes <a href="https://twitter.com/{{ site.twitter_username }}" target="_target">seguirme en twitter</a> o <a href="{{ "/feed.xml" | prepend: site.baseurl }}" target="_blank">suscríbirte a mi feed RSS</a>. Por favor, siéntate libre de enviarme por correo electrónico tus comentarios o correcciones.
			</p>
		{% endif %}
		{% endcomment %}

		<p class="entry">
			Publicado en 
			{% assign sorted_categories = page.categories | sort %}
			{% for category in sorted_categories %}
				{% if category == 'articulos' %}
					<a class="entry-category" href="{{ site.baseurl }}/articulos">artículos</a>
				{% elsif category == 'historias' %}
					<a class="entry-category" href="{{ site.baseurl }}/historias">historias</a>
				{% else %}
					<a class="entry-category" href="{{ site.baseurl }}/momentos">momentos</a>
				{% endif %}
			{% endfor %}
			{% include date.html %}
			{% if site.github_username %}
				{% assign filename = page.url | replace_first: '/', '' | replace: '/', '-' | replace: '.html', '.md' %}
				<a href="https://github.com/{{ site.github_username }}/jonathanzuniga.github.io/edit/master/_posts/articles/{{ filename }}.md">
					Edita este
					{% assign sorted_categories = page.categories | sort %}
					{% for category in sorted_categories %}
						{% if category == 'historias' %}
							historia
						{% else %}
							artículo
						{% endif %}
					{% endfor %}
				 	en GitHub</a>.
			{% endif %}
			Esta obra está bajo una licencia 
			<a href="https://creativecommons.org/licenses/by/4.0/deed.es" rel="license">
				Creative Commons Atribución 4.0 Int</a>.
		</p>
		
		<ul class="tags">
			{% assign sorted_tags = page.tags | sort %}
			{% for tag in sorted_tags %}
				<li class="tags-item">
					<a class="tags-link" href="{{ site.baseurl }}/etiqueta/{{ tag }}">{{ tag }}</a>
				</li>
			{% endfor %}
		</ul>
	{% elsif page.layout == 'tag_page' or
					 page.url == '/buscar' %}
		<ul class="tags">
			{{ site | tag_cloud }}
		</ul>
	{% elsif page.layout == 'articles' %}
		<ul class="tags">
			{% comment %}
				<!-- The following part extracts all the tags from your posts and sort tags, so that you do not need to manually collect your tags to a place. -->
			{% endcomment %}
			{% assign article_tags = '' %}
			{% for article in site.categories['articulos'] %}
				{% assign ttags = article.tags | join: '|' | append: '|' %}
				{% assign article_tags = article_tags | append: ttags %}
			{% endfor %}
			{% assign article_tags = article_tags | split: '|' | sort %}

			{% comment %}
				<!-- The following part removes duplicated tags and invalid tags like blank tag. -->
			{% endcomment %}
			{% assign tags = '' %}
			{% for tag in article_tags %}
				{% if tag != '' %}
					{% if tags == '' %}
						{% assign tags = tag | split: '|' %}
					{% endif %}
					{% unless tags contains tag %}
						{% assign tags = tags | join: '|' | append: '|' | append: tag | split: '|' %}
					{% endunless %}
				{% endif %}
			{% endfor %}

			{% for tag in tags %}
				<li class="tags-item">
					<a class="tags-link" href="{{ site.baseurl }}/etiqueta/{{ tag }}">{{ tag }}</a>
				</li>
			{% endfor %}
		</ul>
	{% elsif page.layout == 'stories' %}
		<ul class="tags">
			{% comment %}
			<!-- The following part extracts all the tags from your posts and sort tags, so that you do not need to manually collect your tags to a place. -->
			{% endcomment %}
			{% assign story_tags = '' %}
			{% for story in site.categories['historias'] %}
				{% assign ttags = story.tags | join: '|' | append: '|' %}
				{% assign story_tags = story_tags | append: ttags %}
			{% endfor %}
			{% assign story_tags = story_tags | split: '|' | sort %}

			{% comment %}
			<!-- The following part removes duplicated tags and invalid tags like blank tag. -->
			{% endcomment %}
			{% assign tags = '' %}
			{% for tag in story_tags %}
				{% if tag != '' %}
					{% if tags == '' %}
						{% assign tags = tag | split: '|' %}
					{% endif %}
					{% unless tags contains tag %}
						{% assign tags = tags | join: '|' | append: '|' | append: tag | split: '|' %}
					{% endunless %}
				{% endif %}
			{% endfor %}

			{% for tag in tags %}
				<li class="tags-item">
					<a class="tags-link" href="{{ site.baseurl }}/etiqueta/{{ tag }}">{{ tag }}</a>
				</li>
			{% endfor %}
		</ul>
	{% elsif page.url == '/recursos' %}
		<ul class="sidebar">
			<li>
				<h3 class="sidebar-title">
					Documentación
				</h3>

				<ul class="sidebar-links">
					{% assign sorted_resources = site.data.resources.documentation | sort: 'title' %}
					{% for resource in sorted_resources %}
						<li>
							<a class="sidebar-link" href="{{ resource.url }}" target="_blank">
								{{ resource.title }}
							</a>
						</li>
					{% endfor %}
				</ul>
			</li>

			<li>
				<h3 class="sidebar-title">
					Guías y Ejemplos
				</h3>

				<ul class="sidebar-links">
					{% assign sorted_resources = site.data.resources.guides | sort: 'title' %}
					{% for resource in sorted_resources %}
						<li>
							<a class="sidebar-link" href="{{ resource.url }}" target="_blank">
								{{ resource.title }}
							</a>
						</li>
					{% endfor %}
				</ul>
			</li>

			<li>
				<h3 class="sidebar-title">
					Herramientas
				</h3>

				<ul class="sidebar-links">
					{% assign sorted_resources = site.data.resources.tools | sort: 'title' %}
					{% for resource in sorted_resources %}
						<li>
							<a class="sidebar-link" href="{{ resource.url }}" target="_blank">
								{{ resource.title }}
							</a>
						</li>
					{% endfor %}
				</ul>
			</li>
		</ul>
	{% elsif page.url == '/autor' %}
		<p class="authors">
			{% assign author = site.authors['jonathan'] %}
			<img class="authors-image" src="{{ site.baseurl }}/images/authors/{{ author.avatar }}" alt="{{ author.name }}">
		</p>

		<p>
			No intentes cambiar un sistema, construye uno nuevo que haga que el anterior se vuelva obsoleto.<br>
			– Richard Buckminster Fuller
		</p>

		<h3 class="aside-title">
			Habilidades
		</h3>

		<p>
			Conocimientos avanzados de HTML y CSS. Comprensión del desarrollo móvil, tecnologías web y diseño responsivo. Destrezas malabares.
		</p>

		<h3 class="aside-title">
			Fortalezas
		</h3>

		<p>
			Aprendiz, autodidacta, constancia, curiosidad, individualización, intelección, perseverancia.
		</p>
	{% endif %}
</div>
