<!DOCTYPE html>
<html>
  {% include head.html %}

  <body>
    {% include header.html %}

    <div class="page-content">
      <div class="wrapper">
        {{ content }}
      </div>
    </div>

    {% include footer.html %}

    <script type="text/javascript">
      $(function() {
        var array_read_time = [];
        // var array_number_of_words = [];
        $('.post-bars').each(function() {
          array_read_time.push($(this).children('.post-read-time-bar').attr('data-read-time'));
          // array_number_of_words.push($(this).children('.post-number-of-words-bar').attr('data-number-of-words'));
        });
        var max_read_time = Math.max.apply(null, array_read_time);
        // var max_number_of_words = Math.max.apply(null, array_number_of_words);

        function percentCalculation(a, b) {
          var c = parseFloat(a) / parseFloat(b);
          return c;
        }

        $('.post-bars').each(function() {
          var percentage_read_time = percentCalculation($(this).children('.post-read-time-bar').attr('data-read-time'), max_read_time);
          $(this).children('.post-read-time-bar').css({
            'opacity' : percentage_read_time
          });
          $(this).children('.post-read-time-bar').children('div').css({
            'width' : (1 - percentage_read_time) * 100 + '%'
          });

          // console.log(percentage_read_time);

          // var percentage_words = percentCalculation($(this).children('.post-number-of-words-bar').attr('data-number-of-words'), max_number_of_words);
          // $(this).children('.post-number-of-words-bar').css({
          //   'opacity' : percentage_words,
          //   'width' : percentage_words * 100 + '%'
          // });

          // console.log(percentage_words);
        });

        // Shuffle title fx.
        String.prototype.shuffle = function () {
            var a = this.split(""),
                n = a.length;

            for(var i = n - 1; i > 0; i--) {
                var j = Math.floor(Math.random() * (i + 1));
                var tmp = a[i];

                a[i] = a[j];
                a[j] = tmp;
            }

            return a.join("");
        }

        var site_title = 'jonathan zúñiga';

        $('h1 .site-title').cypher('decode', {
          alphabet: alphabet,
          animate: 'leftToRight',
          delay: 10000,
          digits: '',
          endText: site_title.shuffle(),
          scheme: 'offset',
          speed: 25
        });

        var alphabet = 'abcdefghijklmnopqrstuvwxyz';

        $('h1 .site-title').on('mouseover touchstart', function() {
          $(this).cypher('decode', {
            alphabet: alphabet,
            animate: 'rightToLeft',
            digits: '',
            endText: site_title,
            scheme: 'offset',
            speed: 25
          });
        });

        $('h1 .site-title').on('mouseleave touchend', function() {
          $(this).cypher('decode', {
            alphabet: alphabet,
            animate: 'leftToRight',
            digits: '',
            endText: site_title.shuffle(),
            scheme: 'offset',
            speed: 25
          });
        });
      });
    </script>
  </body>
</html>
