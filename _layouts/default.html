<!DOCTYPE html>
<html>
  {% include head.html %}

  <body>
    {% include header.html %}

    <div class="page-content">
      <div class="wrapper">
        {{ content }}
      </div>
    </div>

    {% include footer.html %}

    <script type="text/javascript">
      $(function() {
        // Number of words background color opacity.
        var array_of_numbers = [];
        $('.post-words a span').each(function() {
          array_of_numbers.push($(this).text());  
        });
        var max_number = Math.max.apply(null, array_of_numbers);
        // console.log(max_number);

        function percentCalculation(a, b) {
          var c = parseFloat(a) / parseFloat(b);
          return c;
        }

        // $('.post-words a').each(function() {
        //   var percentage = percentCalculation($(this).children('span').text(), max_number);
        //   $(this).css('background-color', 'rgba(225, 190, 231, ' + percentage + ')');
        //   // console.log(percentage);
        // });

        $('.post-words a').each(function() {
          var percentage = percentCalculation($(this).children('span').text(), max_number);
          $(this).closest('.post-meta').find('.post-words-bar').css({
            // 'opacity' : percentage,
            'width' : percentage * 100 + '%'
          });
          // console.log(percentage);
        });

        // Shuffle title fx.
        String.prototype.shuffle = function () {
            var a = this.split(""),
                n = a.length;

            for(var i = n - 1; i > 0; i--) {
                var j = Math.floor(Math.random() * (i + 1));
                var tmp = a[i];

                a[i] = a[j];
                a[j] = tmp;
            }

            return a.join("");
        }

        var site_title = 'jonathan zúñiga';

        $('h1 .site-title').cypher('decode', {
          alphabet: alphabet,
          animate: 'leftToRight',
          delay: 10000,
          digits: '',
          endText: site_title.shuffle(),
          scheme: 'offset',
          speed: 25
        });

        var alphabet = 'abcdefghijklmnopqrstuvwxyz';

        $('h1 .site-title').on('mouseover touchstart', function() {
          $(this).cypher('decode', {
            alphabet: alphabet,
            animate: 'rightToLeft',
            digits: '',
            endText: site_title,
            scheme: 'offset',
            speed: 25
          });
        });

        $('h1 .site-title').on('mouseleave touchend', function() {
          $(this).cypher('decode', {
            alphabet: alphabet,
            animate: 'leftToRight',
            digits: '',
            endText: site_title.shuffle(),
            scheme: 'offset',
            speed: 25
          });
        });
      });
    </script>
  </body>
</html>
